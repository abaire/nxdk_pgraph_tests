<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.8" xml:lang="en-US">
  <compounddef id="d5/d34/classDMACorruptionAroundSurfaceTests" kind="class" language="C++" prot="public">
    <compoundname>DMACorruptionAroundSurfaceTests</compoundname>
    <basecompoundref refid="d2/d3e/classTestSuite" prot="public" virt="non-virtual">TestSuite</basecompoundref>
    <includes refid="d7/d89/dma__corruption__around__surface__tests_8h" local="no">dma_corruption_around_surface_tests.h</includes>
    <sectiondef kind="public-func">
      <memberdef kind="function" id="d5/d34/classDMACorruptionAroundSurfaceTests_1aae49480ee200f1a6efb279a9478958cf" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>DMACorruptionAroundSurfaceTests::DMACorruptionAroundSurfaceTests</definition>
        <argsstring>(TestHost &amp;host, std::string output_dir, const Config &amp;config)</argsstring>
        <name>DMACorruptionAroundSurfaceTests</name>
        <qualifiedname>DMACorruptionAroundSurfaceTests::DMACorruptionAroundSurfaceTests</qualifiedname>
        <param>
          <type><ref refid="d6/d80/classTestHost" kindref="compound">TestHost</ref> &amp;</type>
          <declname>host</declname>
        </param>
        <param>
          <type>std::string</type>
          <declname>output_dir</declname>
        </param>
        <param>
          <type>const <ref refid="da/d85/structTestSuite_1_1Config" kindref="compound">Config</ref> &amp;</type>
          <declname>config</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Initializes the test suite and creates test cases.</para>
<para><simplesect kind="remark"><para>DMAOverlap Sets up a render target in uninitialized data and triggers a nop (degenerate triangle) draw. Then uses the guest CPU to populate the memory within the render target. Sets the render target back to the framebuffer and renders the previous surface as a texture. The texture should not exhibit any corruption from the initial state of the texture.</para>
</simplesect>
<simplesect kind="remark"><para>xemuReadFromFileIntoSurface Sets up a render target and initializes it with a dark color. Then reads new data from a file into the render target and triggers a nop (degenerate triangle) draw. Sets the render target back to the framebuffer and renders the previous surface as a texture. The texture should be bright white, the data provided in the test file.</para>
</simplesect>
<simplesect kind="remark"><para>xemuReadFromFileIntoTexture Draws a texture, then reads new data from a file over the same location in memory and draws a second time. The rendered content should change across the draws. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/tests/dma_corruption_around_surface_tests.h" line="18" column="3" bodyfile="src/tests/dma_corruption_around_surface_tests.cpp" bodystart="55" bodyend="61"/>
      </memberdef>
      <memberdef kind="function" id="d5/d34/classDMACorruptionAroundSurfaceTests_1a1f90076dfb7f1df72027d3dac86c3f35" prot="public" static="no" const="no" explicit="no" inline="no" virt="virtual">
        <type>void</type>
        <definition>void DMACorruptionAroundSurfaceTests::Initialize</definition>
        <argsstring>() override</argsstring>
        <name>Initialize</name>
        <qualifiedname>DMACorruptionAroundSurfaceTests::Initialize</qualifiedname>
        <reimplements refid="d2/d3e/classTestSuite_1a1c4756eb905d6d4d35e1630107396c38">Initialize</reimplements>
        <briefdescription>
<para>Called to initialize the test suite. </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/tests/dma_corruption_around_surface_tests.h" line="19" column="8" bodyfile="src/tests/dma_corruption_around_surface_tests.cpp" bodystart="63" bodyend="72"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="private-func">
      <memberdef kind="function" id="d5/d34/classDMACorruptionAroundSurfaceTests_1ae3c9193fc23d2ff7e0fbff5d533160f4" prot="private" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void DMACorruptionAroundSurfaceTests::Test</definition>
        <argsstring>()</argsstring>
        <name>Test</name>
        <qualifiedname>DMACorruptionAroundSurfaceTests::Test</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/tests/dma_corruption_around_surface_tests.h" line="22" column="8" bodyfile="src/tests/dma_corruption_around_surface_tests.cpp" bodystart="74" bodyend="121"/>
      </memberdef>
      <memberdef kind="function" id="d5/d34/classDMACorruptionAroundSurfaceTests_1a30136d3021e78816a987e72abea04ede" prot="private" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void DMACorruptionAroundSurfaceTests::TestReadFromFileIntoSurface</definition>
        <argsstring>()</argsstring>
        <name>TestReadFromFileIntoSurface</name>
        <qualifiedname>DMACorruptionAroundSurfaceTests::TestReadFromFileIntoSurface</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Tests the behavior of a read from the HDD into the current render target surface.</para>
<para>As of xemu 0.8.110, this ends up discarding the data read from the HDD when the color target is modified from the test surface, prompting a download from GPU memory and restoring stale data.</para>
<para>Note: This only appears to happen with HDD reads (e.g., from the cache partition), reading from the ROM appears to work reliably. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/tests/dma_corruption_around_surface_tests.h" line="31" column="8" bodyfile="src/tests/dma_corruption_around_surface_tests.cpp" bodystart="166" bodyend="231"/>
      </memberdef>
      <memberdef kind="function" id="d5/d34/classDMACorruptionAroundSurfaceTests_1a6f9331777c4d7d4f0467c597d61a8e93" prot="private" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void DMACorruptionAroundSurfaceTests::TestReadFromFileIntoTexture</definition>
        <argsstring>()</argsstring>
        <name>TestReadFromFileIntoTexture</name>
        <qualifiedname>DMACorruptionAroundSurfaceTests::TestReadFromFileIntoTexture</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Tests the behavior of a read from the HDD into an existing texture.</para>
<para>As of xemu 0.8.110, this ends up discarding the data read from the HDD when the color target is modified from the test surface, prompting a download from GPU memory and restoring stale data.</para>
<para>Note: This only appears to happen with HDD reads (e.g., from the cache partition), reading from the ROM appears to work reliably. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/tests/dma_corruption_around_surface_tests.h" line="40" column="8" bodyfile="src/tests/dma_corruption_around_surface_tests.cpp" bodystart="233" bodyend="287"/>
      </memberdef>
      <memberdef kind="function" id="d5/d34/classDMACorruptionAroundSurfaceTests_1a6f18451dce6d4966a7c2c4d00ccad0c4" prot="private" static="no" const="yes" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void DMACorruptionAroundSurfaceTests::Draw</definition>
        <argsstring>(uint32_t stage=0) const</argsstring>
        <name>Draw</name>
        <qualifiedname>DMACorruptionAroundSurfaceTests::Draw</qualifiedname>
        <param>
          <type>uint32_t</type>
          <declname>stage</declname>
          <defval>0</defval>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/tests/dma_corruption_around_surface_tests.h" line="42" column="8" bodyfile="src/tests/dma_corruption_around_surface_tests.cpp" bodystart="289" bodyend="346"/>
      </memberdef>
      <memberdef kind="function" id="d5/d34/classDMACorruptionAroundSurfaceTests_1a490964fff09dafd319b30216d5c489c9" prot="private" static="no" const="yes" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void DMACorruptionAroundSurfaceTests::NoOpDraw</definition>
        <argsstring>() const</argsstring>
        <name>NoOpDraw</name>
        <qualifiedname>DMACorruptionAroundSurfaceTests::NoOpDraw</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/tests/dma_corruption_around_surface_tests.h" line="43" column="8" bodyfile="src/tests/dma_corruption_around_surface_tests.cpp" bodystart="348" bodyend="354"/>
      </memberdef>
      <memberdef kind="function" id="d5/d34/classDMACorruptionAroundSurfaceTests_1a59c0198f1fab25f8700f9f781b0e7bd7" prot="private" static="no" const="yes" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void DMACorruptionAroundSurfaceTests::WaitForGPU</definition>
        <argsstring>() const</argsstring>
        <name>WaitForGPU</name>
        <qualifiedname>DMACorruptionAroundSurfaceTests::WaitForGPU</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/tests/dma_corruption_around_surface_tests.h" line="44" column="8" bodyfile="src/tests/dma_corruption_around_surface_tests.cpp" bodystart="356" bodyend="361"/>
      </memberdef>
    </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para>Tests the behavior of DMA on xemu&apos;s implementation of GPU-owned overlay buffers.</para>
<para>These tests are generally specific to emulator testing and likely should not serve as examples of how to do PGRAPH interactions, nor are they likely to illuminate unexpected behavior in HW. </para>
    </detaileddescription>
    <inheritancegraph>
      <node id="1">
        <label>DMACorruptionAroundSurfaceTests</label>
        <link refid="d5/d34/classDMACorruptionAroundSurfaceTests"/>
        <childnode refid="2" relation="public-inheritance">
        </childnode>
      </node>
      <node id="2">
        <label>TestSuite</label>
        <link refid="d2/d3e/classTestSuite"/>
      </node>
    </inheritancegraph>
    <collaborationgraph>
      <node id="1">
        <label>DMACorruptionAroundSurfaceTests</label>
        <link refid="d5/d34/classDMACorruptionAroundSurfaceTests"/>
        <childnode refid="2" relation="public-inheritance">
        </childnode>
      </node>
      <node id="4">
        <label>NV2AState</label>
      </node>
      <node id="5">
        <label>PGRAPHDiffToken</label>
        <link refid="dd/df8/structPGRAPHDiffToken"/>
      </node>
      <node id="3">
        <label>TestHost</label>
        <link refid="d6/d80/classTestHost"/>
        <childnode refid="4" relation="public-inheritance">
        </childnode>
      </node>
      <node id="2">
        <label>TestSuite</label>
        <link refid="d2/d3e/classTestSuite"/>
        <childnode refid="3" relation="usage">
          <edgelabel>host_</edgelabel>
        </childnode>
        <childnode refid="5" relation="usage">
          <edgelabel>pgraph_diff_</edgelabel>
        </childnode>
      </node>
    </collaborationgraph>
    <location file="src/tests/dma_corruption_around_surface_tests.h" line="16" column="1" bodyfile="src/tests/dma_corruption_around_surface_tests.h" bodystart="16" bodyend="45"/>
    <listofallmembers>
      <member refid="d2/d3e/classTestSuite_1a1bb705ad4344ceb8237e0cb60f1c352d" prot="protected" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>allow_saving_</name></member>
      <member refid="d2/d3e/classTestSuite_1a28742e0a5438926d43d0814c9694836f" prot="public" virt="virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>Deinitialize</name></member>
      <member refid="d2/d3e/classTestSuite_1a7ce09368bd59391f6a9685224cdb8a43" prot="protected" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>delay_milliseconds_between_tests_</name></member>
      <member refid="d2/d3e/classTestSuite_1a165d9da1dec525ffdd299e2dcfaec2ef" prot="public" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>DisableTests</name></member>
      <member refid="d5/d34/classDMACorruptionAroundSurfaceTests_1aae49480ee200f1a6efb279a9478958cf" prot="public" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>DMACorruptionAroundSurfaceTests</name></member>
      <member refid="d5/d34/classDMACorruptionAroundSurfaceTests_1a6f18451dce6d4966a7c2c4d00ccad0c4" prot="private" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>Draw</name></member>
      <member refid="d2/d3e/classTestSuite_1ac65ad3a2e3cfa4fe555fc1fa95e0a60b" prot="protected" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>enable_pgraph_region_diff_</name></member>
      <member refid="d2/d3e/classTestSuite_1a391930dfd9c57a4e7cbe8734120dfc73" prot="protected" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>enable_progress_log_</name></member>
      <member refid="d2/d3e/classTestSuite_1ac2af46c389b567bb3c2aed2829e7450e" prot="protected" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>FinishDraw</name></member>
      <member refid="d2/d3e/classTestSuite_1a9208c80e870bdb3e0f7fa6d53053c15a" prot="protected" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>FinishDrawNoSave</name></member>
      <member refid="d2/d3e/classTestSuite_1a518ce9987a1a5037f9083651c056c746" prot="protected" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>ftp_logger_</name></member>
      <member refid="d2/d3e/classTestSuite_1a7059e61572d914cff83ae22da3ea1957" prot="public" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>HasEnabledTests</name></member>
      <member refid="d2/d3e/classTestSuite_1a454f5c2050b66b598a2f2fcffd45ae48" prot="protected" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>host_</name></member>
      <member refid="d5/d34/classDMACorruptionAroundSurfaceTests_1a1f90076dfb7f1df72027d3dac86c3f35" prot="public" virt="virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>Initialize</name></member>
      <member refid="d2/d3e/classTestSuite_1ad87fbc52b4011398c9adb39ab62bb018" prot="protected" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>interactive_only_</name></member>
      <member refid="d2/d3e/classTestSuite_1a3158c3988345729a898ef5f9290ad00f" prot="protected" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>interactive_only_tests_</name></member>
      <member refid="d2/d3e/classTestSuite_1ac26e1edd73faf7d732c0e41e816d654e" prot="public" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>IsInteractiveOnly</name></member>
      <member refid="d2/d3e/classTestSuite_1a15144024801f2f885727f7926c826c87" prot="public" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>Name</name></member>
      <member refid="d5/d34/classDMACorruptionAroundSurfaceTests_1a490964fff09dafd319b30216d5c489c9" prot="private" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>NoOpDraw</name></member>
      <member refid="d2/d3e/classTestSuite_1a2e81678d3ac733d517616bd67a837465" prot="protected" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>output_dir_</name></member>
      <member refid="d2/d3e/classTestSuite_1adc29cb178f12adee9cbabd1451a0d3b1" prot="protected" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>pgraph_diff_</name></member>
      <member refid="d2/d3e/classTestSuite_1a40546218e5f7324690e0455706694763" prot="public" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>Run</name></member>
      <member refid="d2/d3e/classTestSuite_1a38b931cc507a7ca4c96d09b906f64bf3" prot="public" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>RunAll</name></member>
      <member refid="d2/d3e/classTestSuite_1a0d580dbb0e1630ecdc989d5c852e8f91" prot="protected" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>SetDefaultTextureFormat</name></member>
      <member refid="d2/d3e/classTestSuite_1a94c9bf323dd57396c2768e21690bf0d7" prot="public" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>SetSavingAllowed</name></member>
      <member refid="d2/d3e/classTestSuite_1af001b219ae1d7798d9df21b5bb8b9976" prot="public" virt="virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>SetupTest</name></member>
      <member refid="d2/d3e/classTestSuite_1ac59f02a9549a146ed62e6185c0acec8b" prot="protected" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>suite_name_</name></member>
      <member refid="d2/d3e/classTestSuite_1a92d01e0978cf79ad0883532c73434515" prot="public" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>TagNV2ATrace</name></member>
      <member refid="d2/d3e/classTestSuite_1a4a67d49ad17fafd018be9871cc0910c3" prot="public" virt="virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>TearDownTest</name></member>
      <member refid="d5/d34/classDMACorruptionAroundSurfaceTests_1ae3c9193fc23d2ff7e0fbff5d533160f4" prot="private" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>Test</name></member>
      <member refid="d2/d3e/classTestSuite_1a80f0bc74d8d511547708827e5a549a63" prot="public" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>TestNames</name></member>
      <member refid="d5/d34/classDMACorruptionAroundSurfaceTests_1a30136d3021e78816a987e72abea04ede" prot="private" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>TestReadFromFileIntoSurface</name></member>
      <member refid="d5/d34/classDMACorruptionAroundSurfaceTests_1a6f9331777c4d7d4f0467c597d61a8e93" prot="private" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>TestReadFromFileIntoTexture</name></member>
      <member refid="d2/d3e/classTestSuite_1a1eaaf3893135b062cd0a09d2a1a2ac0f" prot="protected" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>tests_</name></member>
      <member refid="d2/d3e/classTestSuite_1a57b1ed01dd40328456bf0854043ca68b" prot="public" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>TestSuite</name></member>
      <member refid="d2/d3e/classTestSuite_1a5957b74827526f04ff525b750decafd7" prot="public" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>TestSuite</name></member>
      <member refid="d5/d34/classDMACorruptionAroundSurfaceTests_1a59c0198f1fab25f8700f9f781b0e7bd7" prot="private" virt="non-virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>WaitForGPU</name></member>
      <member refid="d2/d3e/classTestSuite_1a1743f0a04119de901cb819111d51192d" prot="public" virt="virtual"><scope>DMACorruptionAroundSurfaceTests</scope><name>~TestSuite</name></member>
    </listofallmembers>
  </compounddef>
</doxygen>
